
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
  <link rel="shortcut icon" href="favicon.ico">
  <title>hara.zip - data traversal in style</title>
  <script src="js/highlight.min.js"></script>
  <script src="js/gumshoe.min.js"></script>
  <script src="js/smooth-scroll.min.js"></script>
  
  <!-- CSS -->
  <link rel="stylesheet" href="css/poole.css">
  <link rel="stylesheet" href="css/syntax.css">
  <link rel="stylesheet" href="css/lanyon.css">
  <link rel="stylesheet" href="css/bolton.css">
  <link rel="stylesheet" href="css/bolton-api.css">
  <link rel="stylesheet" href="css/bolton-highlight.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">
  
</head>

  <body class="theme-base-08">
    <span id="page-top"></span>

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <nav class="sidebar-nav">
    <span>&nbsp;</span>
    <a class="sidebar-nav-item header" href="index.html"><img src="img/logo-white.png"/></a>
    <span>&nbsp;</span>
    <a class="sidebar-nav-item" href="hara-benchmark.html">benchmark</a><a class="sidebar-nav-item" href="hara-class.html">class</a><a class="sidebar-nav-item" href="hara-common.html">common</a><a class="sidebar-nav-item" href="hara-component.html">component</a><a class="sidebar-nav-item" href="hara-concurrent.html">concurrent</a><a class="sidebar-nav-item" href="hara-concurrent-ova.html">concurrent.ova</a><a class="sidebar-nav-item" href="hara-concurrent-procedure.html">concurrent.procedure</a><a class="sidebar-nav-item" href="hara-data.html">data</a><a class="sidebar-nav-item" href="hara-event.html">event</a><a class="sidebar-nav-item" href="hara-expression.html">expression</a><a class="sidebar-nav-item" href="hara-extend.html">extend</a><a class="sidebar-nav-item" href="hara-function.html">function</a><a class="sidebar-nav-item" href="hara-group.html">group</a><a class="sidebar-nav-item" href="hara-io.html">io</a><a class="sidebar-nav-item" href="hara-io-file.html">io.file</a><a class="sidebar-nav-item" href="hara-io-profiler.html">io.profiler</a><a class="sidebar-nav-item" href="hara-io-scheduler.html">io.scheduler</a><a class="sidebar-nav-item" href="hara-io-watch.html">io.watch</a><a class="sidebar-nav-item" href="hara-namespace.html">namespace</a><a class="sidebar-nav-item" href="hara-object.html">object</a><a class="sidebar-nav-item" href="hara-reflect.html">reflect</a><a class="sidebar-nav-item" href="hara-security.html">security</a><a class="sidebar-nav-item" href="hara-sort.html">sort</a><a class="sidebar-nav-item" href="hara-string.html">string</a><a class="sidebar-nav-item" href="hara-test.html">test</a><a class="sidebar-nav-item" href="hara-time.html">time</a><a class="sidebar-nav-item active" href="hara-zip.html">zip</a>
    <span class="sidebar-nav-item">&nbsp;</span>
    <span class="sidebar-nav-item">&nbsp;</span>
  </nav>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <span>hara.zip</span>
            <small>data traversal in style</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="page">
          <div class="heading">
            <div>
              <h5>Author: Chris Zheng&nbsp;&nbsp;<a href="mailto:z@caudate.me">(z@caudate.me)</a></h5>
              <h5>Date: 29 June 2017</h5>
              <h5>Repository: <a href="https://github.com/zcaudate/hara">https://github.com/zcaudate/hara</a></h5>
              <h5>Version: 2.5.10</h5></div></div>
          <hr/>
          <div class="outline">
            <div class="toc">
              <nav data-gumshoe-header>
                <ul data-gumshoe>
                  <a data-scroll class="top" href="#page-top">TOP</a>
                  <li><a class="chapter" data-scroll="" href="#introduction"><h4>1 &nbsp; Introduction</h4></a><a class="section" data-scroll="" href="#installation"><h5><i>1.1 &nbsp; Installation</i></h5></a></li><li><a class="chapter" data-scroll="" href="#index"><h4>2 &nbsp; Index</h4></a></li><li><a class="chapter" data-scroll="" href="#api"><h4>3 &nbsp; API</h4></a><a class="section" data-scroll="" href="#basics"><h5><i>3.1 &nbsp; Basics</i></h5></a><a class="section" data-scroll="" href="#direction"><h5><i>3.2 &nbsp; Direction</i></h5></a><a class="section" data-scroll="" href="#elements"><h5><i>3.3 &nbsp; Elements</i></h5></a><a class="section" data-scroll="" href="#editing"><h5><i>3.4 &nbsp; Editing</i></h5></a></li><li><a class="chapter" data-scroll="" href="#boundaries"><h4>4 &nbsp; Boundaries</h4></a><a class="section" data-scroll="" href="#default-behavior"><h5><i>4.1 &nbsp; Default Behavior</i></h5></a><a class="section" data-scroll="" href="#overrides"><h5><i>4.2 &nbsp; Overrides</i></h5></a></li>
                </ul>
              </nav>
            </div>
          </div>

          <div class="toc">
              <nav>
                <ul>
                  <li><a class="chapter" data-scroll="" href="#introduction"><h4>1 &nbsp; Introduction</h4></a><a class="section" data-scroll="" href="#installation"><h5><i>1.1 &nbsp; Installation</i></h5></a></li><li><a class="chapter" data-scroll="" href="#index"><h4>2 &nbsp; Index</h4></a></li><li><a class="chapter" data-scroll="" href="#api"><h4>3 &nbsp; API</h4></a><a class="section" data-scroll="" href="#basics"><h5><i>3.1 &nbsp; Basics</i></h5></a><a class="section" data-scroll="" href="#direction"><h5><i>3.2 &nbsp; Direction</i></h5></a><a class="section" data-scroll="" href="#elements"><h5><i>3.3 &nbsp; Elements</i></h5></a><a class="section" data-scroll="" href="#editing"><h5><i>3.4 &nbsp; Editing</i></h5></a></li><li><a class="chapter" data-scroll="" href="#boundaries"><h4>4 &nbsp; Boundaries</h4></a><a class="section" data-scroll="" href="#default-behavior"><h5><i>4.1 &nbsp; Default Behavior</i></h5></a><a class="section" data-scroll="" href="#overrides"><h5><i>4.2 &nbsp; Overrides</i></h5></a></li>
                </ul>
              </nav>
          </div>
          <div><span id="introduction"></span><h2><b>1 &nbsp;&nbsp; Introduction</b></h2></div><div><p><a href='https://github.com/zcaudate/hara/blob/master/src/hara/zip.clj'>hara.zip</a> provides a customisable zipper implementation for navigating datastructures</p></div><div><span id="installation"></span><h3>1.1 &nbsp;&nbsp; Installation</h3></div><div><p>Add to <code>project.clj</code> dependencies:</p><pre><code>&#91;zcaudate/hara.zip &quot;2.5.10&quot;&#93;
</code></pre>All functionality is found contained in the <code>hara.zip</code> namespace</div><div class="code"><pre><code class="clojure">(require '[hara.zip :as zip])</code></pre></div><div><span id="index"></span><h2><b>2 &nbsp;&nbsp; Index</b></h2></div><div class="api"><span id="entry__hara_zip__"></span><hr /><div><ul><li><a data-scroll="" href="#entry__hara_zip__bottom_most_QMARK_">bottom-most?</a></li><li><a data-scroll="" href="#entry__hara_zip__cursor">cursor</a></li><li><a data-scroll="" href="#entry__hara_zip__cursor_str">cursor-str</a></li><li><a data-scroll="" href="#entry__hara_zip__delete_left">delete-left</a></li><li><a data-scroll="" href="#entry__hara_zip__delete_right">delete-right</a></li><li><a data-scroll="" href="#entry__hara_zip__down">down</a></li><li><a data-scroll="" href="#entry__hara_zip__end">end</a></li><li><a data-scroll="" href="#entry__hara_zip__find_next">find-next</a></li><li><a data-scroll="" href="#entry__hara_zip__find_prev">find-prev</a></li><li><a data-scroll="" href="#entry__hara_zip__from_cursor">from-cursor</a></li><li><a data-scroll="" href="#entry__hara_zip__history">history</a></li><li><a data-scroll="" href="#entry__hara_zip__insert_left">insert-left</a></li><li><a data-scroll="" href="#entry__hara_zip__insert_right">insert-right</a></li><li><a data-scroll="" href="#entry__hara_zip__left">left</a></li><li><a data-scroll="" href="#entry__hara_zip__left_most_QMARK_">left-most?</a></li><li><a data-scroll="" href="#entry__hara_zip__left_node">left-node</a></li><li><a data-scroll="" href="#entry__hara_zip__left_nodes">left-nodes</a></li><li><a data-scroll="" href="#entry__hara_zip__move_bottom_most">move-bottom-most</a></li><li><a data-scroll="" href="#entry__hara_zip__move_down">move-down</a></li><li><a data-scroll="" href="#entry__hara_zip__move_down_QMARK_">move-down?</a></li><li><a data-scroll="" href="#entry__hara_zip__move_left">move-left</a></li><li><a data-scroll="" href="#entry__hara_zip__move_left_most">move-left-most</a></li><li><a data-scroll="" href="#entry__hara_zip__move_left_QMARK_">move-left?</a></li><li><a data-scroll="" href="#entry__hara_zip__move_right">move-right</a></li><li><a data-scroll="" href="#entry__hara_zip__move_right_most">move-right-most</a></li><li><a data-scroll="" href="#entry__hara_zip__move_right_QMARK_">move-right?</a></li><li><a data-scroll="" href="#entry__hara_zip__move_top_most">move-top-most</a></li><li><a data-scroll="" href="#entry__hara_zip__move_up">move-up</a></li><li><a data-scroll="" href="#entry__hara_zip__move_up_QMARK_">move-up?</a></li><li><a data-scroll="" href="#entry__hara_zip__next">next</a></li><li><a data-scroll="" href="#entry__hara_zip__node">node</a></li><li><a data-scroll="" href="#entry__hara_zip__postwalk">postwalk</a></li><li><a data-scroll="" href="#entry__hara_zip__prev">prev</a></li><li><a data-scroll="" href="#entry__hara_zip__prewalk">prewalk</a></li><li><a data-scroll="" href="#entry__hara_zip__replace_left">replace-left</a></li><li><a data-scroll="" href="#entry__hara_zip__replace_right">replace-right</a></li><li><a data-scroll="" href="#entry__hara_zip__right">right</a></li><li><a data-scroll="" href="#entry__hara_zip__right_most_QMARK_">right-most?</a></li><li><a data-scroll="" href="#entry__hara_zip__right_node">right-node</a></li><li><a data-scroll="" href="#entry__hara_zip__right_nodes">right-nodes</a></li><li><a data-scroll="" href="#entry__hara_zip__root_node">root-node</a></li><li><a data-scroll="" href="#entry__hara_zip__seq_zip">seq-zip</a></li><li><a data-scroll="" href="#entry__hara_zip__siblings">siblings</a></li><li><a data-scroll="" href="#entry__hara_zip__surround">surround</a></li><li><a data-scroll="" href="#entry__hara_zip__top_most_QMARK_">top-most?</a></li><li><a data-scroll="" href="#entry__hara_zip__traverse">traverse</a></li><li><a data-scroll="" href="#entry__hara_zip__up">up</a></li><li><a data-scroll="" href="#entry__hara_zip__vector_zip">vector-zip</a></li><li><a data-scroll="" href="#entry__hara_zip__zipper">zipper</a></li></ul></div></div><div><span id="api"></span><h2><b>3 &nbsp;&nbsp; API</b></h2></div><div><span id="basics"></span><h3>3.1 &nbsp;&nbsp; Basics</h3></div><div class="api"><span id="entry__hara_zip__"></span><hr /><div><ul><li><a data-scroll="" href="#entry__hara_zip__zipper">zipper</a></li><li><a data-scroll="" href="#entry__hara_zip__seq_zip">seq-zip</a></li><li><a data-scroll="" href="#entry__hara_zip__vector_zip">vector-zip</a></li><li><a data-scroll="" href="#entry__hara_zip__up">up</a></li><li><a data-scroll="" href="#entry__hara_zip__down">down</a></li><li><a data-scroll="" href="#entry__hara_zip__left">left</a></li><li><a data-scroll="" href="#entry__hara_zip__right">right</a></li><li><a data-scroll="" href="#entry__hara_zip__end">end</a></li><li><a data-scroll="" href="#entry__hara_zip__cursor">cursor</a></li><li><a data-scroll="" href="#entry__hara_zip__cursor_str">cursor-str</a></li><li><a data-scroll="" href="#entry__hara_zip__from_cursor">from-cursor</a></li><li><a data-scroll="" href="#entry__hara_zip__next">next</a></li><li><a data-scroll="" href="#entry__hara_zip__prev">prev</a></li><li><a data-scroll="" href="#entry__hara_zip__find_next">find-next</a></li><li><a data-scroll="" href="#entry__hara_zip__find_prev">find-prev</a></li></ul><hr style="margin-bottom: 0" /><div><div class="entry"><span id="entry__hara_zip__zipper"></span><div class="entry-description"><h4><b>zipper&nbsp<a data-scroll="" href="#entry__hara_zip__">^</a></b></h4><p><i>constructs a zipper</i></p></div><div class="entry-option"><h6><a href="https://github.com/zcaudate/hara/blob/master/src/hara/zip/base.clj#L37-L49" target="_blank">v&nbsp;2.4</a></h6><div><input class="source-toggle" id="entry__pre_hara_zip__zipper" type="checkbox" /><label class="source-toggle" for="entry__pre_hara_zip__zipper"></label><pre class="source"><code class="clojure">(defn zipper
  ([root {:keys [branch? children make-node] :as meta}]
   (map->Zipper {:left ()
                 :right (list root)
                 :parent :top
                 :meta (zipper-meta meta)})))</code></pre></div></div><pre><h6><i><a href="https://github.com/zcaudate/hara/blob/master/test/hara/zip/base_test.clj#L24-L29" target="_blank">link</a></i></h6><code class="clojure">(zipper '(1 2 3) {:branch?   seq?
                  :children  identity
                  :make-node identity})
=> zipper?</code></pre></div><div class="entry"><span id="entry__hara_zip__seq_zip"></span><div class="entry-description"><h4><b>seq-zip&nbsp<a data-scroll="" href="#entry__hara_zip__">^</a></b></h4><p><i>constructs a sequence zipper</i></p></div><div class="entry-option"><h6><a href="https://github.com/zcaudate/hara/blob/master/src/hara/zip/base.clj#L51-L62" target="_blank">v&nbsp;2.4</a></h6><div><input class="source-toggle" id="entry__pre_hara_zip__seq_zip" type="checkbox" /><label class="source-toggle" for="entry__pre_hara_zip__seq_zip"></label><pre class="source"><code class="clojure">(defn seq-zip
  [root]
  (zipper root {:branch?   seq?
                :children  identity
                :make-node identity}))</code></pre></div></div><pre><h6><i><a href="https://github.com/zcaudate/hara/blob/master/test/hara/zip/base_test.clj#L32-L37" target="_blank">link</a></i></h6><code class="clojure">(seq-zip '(1 2 3 4 5))
=> (contains {:left (),
              :right '((1 2 3 4 5)),
              :parent :top})</code></pre></div><div class="entry"><span id="entry__hara_zip__vector_zip"></span><div class="entry-description"><h4><b>vector-zip&nbsp<a data-scroll="" href="#entry__hara_zip__">^</a></b></h4><p><i>constructs a vector based zipper</i></p></div><div class="entry-option"><h6><a href="https://github.com/zcaudate/hara/blob/master/src/hara/zip/base.clj#L64-L75" target="_blank">v&nbsp;2.4</a></h6><div><input class="source-toggle" id="entry__pre_hara_zip__vector_zip" type="checkbox" /><label class="source-toggle" for="entry__pre_hara_zip__vector_zip"></label><pre class="source"><code class="clojure">(defn vector-zip
  [root]
  (zipper root {:branch? vector?
                :children seq
                :make-node vec}))</code></pre></div></div><pre><h6><i><a href="https://github.com/zcaudate/hara/blob/master/test/hara/zip/base_test.clj#L40-L45" target="_blank">link</a></i></h6><code class="clojure">(vector-zip [1 2 3 4 5])
=> (contains {:left (),
              :right '([1 2 3 4 5])
              :parent :top})</code></pre></div><div class="entry"><span id="entry__hara_zip__up"></span><div class="entry-description"><h4><b>up&nbsp<a data-scroll="" href="#entry__hara_zip__">^</a></b></h4><p><i>move cursor up</i></p></div><div class="entry-option"><h6><a href="https://github.com/zcaudate/hara/blob/master/src/hara/zip.clj#L49-L63" target="_blank">v&nbsp;2.4</a></h6><div><input class="source-toggle" id="entry__pre_hara_zip__up" type="checkbox" /><label class="source-toggle" for="entry__pre_hara_zip__up"></label><pre class="source"><code class="clojure">(defn up
  [zip]
  (base/move-up zip))</code></pre></div></div><pre><h6><i><a href="https://github.com/zcaudate/hara/blob/master/test/hara/zip_test.clj#L29-L39" target="_blank">link</a></i></h6><code class="clojure">(-> (from-cursor [1 '| 2 3])
    (up)
    (cursor))
=> '(| [1 2 3])

(-> (from-cursor [1 [['| 2] 3]])
    (up)
    (cursor))
=> '([1 [| [2] 3]])</code></pre></div><div class="entry"><span id="entry__hara_zip__down"></span><div class="entry-description"><h4><b>down&nbsp<a data-scroll="" href="#entry__hara_zip__">^</a></b></h4><p><i>move cursor down</i></p></div><div class="entry-option"><h6><a href="https://github.com/zcaudate/hara/blob/master/src/hara/zip.clj#L65-L74" target="_blank">v&nbsp;2.4</a></h6><div><input class="source-toggle" id="entry__pre_hara_zip__down" type="checkbox" /><label class="source-toggle" for="entry__pre_hara_zip__down"></label><pre class="source"><code class="clojure">(defn down
  [zip]
  (base/move-down zip))</code></pre></div></div><pre><h6><i><a href="https://github.com/zcaudate/hara/blob/master/test/hara/zip_test.clj#L42-L47" target="_blank">link</a></i></h6><code class="clojure">(-> (from-cursor '[1 [| [2] 3]])
    (down)
    (cursor))
=> '([1 [[| 2] 3]])</code></pre></div><div class="entry"><span id="entry__hara_zip__left"></span><div class="entry-description"><h4><b>left&nbsp<a data-scroll="" href="#entry__hara_zip__">^</a></b></h4><p><i>move cursor left</i></p></div><div class="entry-option"><h6><a href="https://github.com/zcaudate/hara/blob/master/src/hara/zip.clj#L28-L37" target="_blank">v&nbsp;2.4</a></h6><div><input class="source-toggle" id="entry__pre_hara_zip__left" type="checkbox" /><label class="source-toggle" for="entry__pre_hara_zip__left"></label><pre class="source"><code class="clojure">(defn left
  [zip]
  (base/move-left zip))</code></pre></div></div><pre><h6><i><a href="https://github.com/zcaudate/hara/blob/master/test/hara/zip_test.clj#L14-L19" target="_blank">link</a></i></h6><code class="clojure">(-> (from-cursor [1 '| 2 3])
    (left)
    (cursor))
=> '([| 1 2 3])</code></pre></div><div class="entry"><span id="entry__hara_zip__right"></span><div class="entry-description"><h4><b>right&nbsp<a data-scroll="" href="#entry__hara_zip__">^</a></b></h4><p><i>move cursor right</i></p></div><div class="entry-option"><h6><a href="https://github.com/zcaudate/hara/blob/master/src/hara/zip.clj#L39-L47" target="_blank">v&nbsp;2.4</a></h6><div><input class="source-toggle" id="entry__pre_hara_zip__right" type="checkbox" /><label class="source-toggle" for="entry__pre_hara_zip__right"></label><pre class="source"><code class="clojure">(defn right
  [zip]
  (base/move-right zip))</code></pre></div></div><pre><h6><i><a href="https://github.com/zcaudate/hara/blob/master/test/hara/zip_test.clj#L22-L26" target="_blank">link</a></i></h6><code class="clojure">(-> (from-cursor [1 '| 2 3])
    (right)
    (cursor))
=> '([1 2 | 3])</code></pre></div><div class="entry"><span id="entry__hara_zip__end"></span><div class="entry-description"><h4><b>end&nbsp<a data-scroll="" href="#entry__hara_zip__">^</a></b></h4><p><i>move cursor to the end of the tree</i></p></div><div class="entry-option"><h6><a href="https://github.com/zcaudate/hara/blob/master/src/hara/zip.clj#L143-L159" target="_blank">v&nbsp;2.4</a></h6><div><input class="source-toggle" id="entry__pre_hara_zip__end" type="checkbox" /><label class="source-toggle" for="entry__pre_hara_zip__end"></label><pre class="source"><code class="clojure">(defn end
  [zip]
  (cond (nil? zip) nil

        (base/move-right? (base/move-right zip))
        (recur (base/move-right zip))

        (base/move-down? zip)
        (recur (base/move-down zip))

        :else zip))</code></pre></div></div><pre><h6><i><a href="https://github.com/zcaudate/hara/blob/master/test/hara/zip_test.clj#L89-L93" target="_blank">link</a></i></h6><code class="clojure">(->> (vector-zip [1 [2 [6 7] 3] [4 5]])
     (end)
     (cursor))
=> '([1 [2 [6 7] 3] [4 | 5]])</code></pre></div><div class="entry"><span id="entry__hara_zip__cursor"></span><div class="entry-description"><h4><b>cursor&nbsp<a data-scroll="" href="#entry__hara_zip__">^</a></b></h4><p><i>returns the form with the cursor showing</i></p></div><div class="entry-option"><h6><a href="https://github.com/zcaudate/hara/blob/master/src/hara/zip.clj#L113-L128" target="_blank">v&nbsp;2.4</a></h6><div><input class="source-toggle" id="entry__pre_hara_zip__cursor" type="checkbox" /><label class="source-toggle" for="entry__pre_hara_zip__cursor"></label><pre class="source"><code class="clojure">(defn cursor
  [zip]
  (event/manage
   (-> zip
       (base/insert-left '|)
       (base/move-top-most)
       (base/siblings))
   (on {:fn :insert-left :tag :at-top} [zip element]
       (event/continue (base/insert-base zip element :left :insert-left)))))</code></pre></div></div><pre><h6><i><a href="https://github.com/zcaudate/hara/blob/master/test/hara/zip_test.clj#L66-L71" target="_blank">link</a></i></h6><code class="clojure">(-> (vector-zip [1 [[2] 3]])
    (find-next even?)
    (cursor))
=> '([1 [[| 2] 3]])</code></pre></div><div class="entry"><span id="entry__hara_zip__cursor_str"></span><div class="entry-description"><h4><b>cursor-str&nbsp<a data-scroll="" href="#entry__hara_zip__">^</a></b></h4><p><i>returns the string form of the cursor</i></p></div><div class="entry-option"><h6><a href="https://github.com/zcaudate/hara/blob/master/src/hara/zip.clj#L130-L141" target="_blank">v&nbsp;2.4</a></h6><div><input class="source-toggle" id="entry__pre_hara_zip__cursor_str" type="checkbox" /><label class="source-toggle" for="entry__pre_hara_zip__cursor_str"></label><pre class="source"><code class="clojure">(defn cursor-str
  [zip]
  (->> (cursor zip)
       (apply prn-str)
       (string/trim)))</code></pre></div></div><pre><h6><i><a href="https://github.com/zcaudate/hara/blob/master/test/hara/zip_test.clj#L74-L79" target="_blank">link</a></i></h6><code class="clojure">(-> (vector-zip [1 [[2] 3]])
    (find-next even?)
    (cursor-str))
=> "[1 [[| 2] 3]]"</code></pre></div><div class="entry"><span id="entry__hara_zip__from_cursor"></span><div class="entry-description"><h4><b>from-cursor&nbsp<a data-scroll="" href="#entry__hara_zip__">^</a></b></h4><p><i>returns a zipper given a data structure with | as the cursor</i></p></div><div class="entry-option"><h6><a href="https://github.com/zcaudate/hara/blob/master/src/hara/zip.clj#L254-L263" target="_blank">v&nbsp;2.4</a></h6><div><input class="source-toggle" id="entry__pre_hara_zip__from_cursor" type="checkbox" /><label class="source-toggle" for="entry__pre_hara_zip__from_cursor"></label><pre class="source"><code class="clojure">(defn from-cursor
  [arr]
  (-> (vector-zip arr)
      (find-next  #(= '| %))
      (delete-right)))</code></pre></div></div><pre><h6><i><a href="https://github.com/zcaudate/hara/blob/master/test/hara/zip_test.clj#L82-L86" target="_blank">link</a></i></h6><code class="clojure">(from-cursor '[1 2 3 | 4])
=> (contains {:left '(3 2 1),
              :right '(4)})</code></pre></div><div class="entry"><span id="entry__hara_zip__next"></span><div class="entry-description"><h4><b>next&nbsp<a data-scroll="" href="#entry__hara_zip__">^</a></b></h4><p><i>move cursor through the tree in depth first order</i></p></div><div class="entry-option"><h6><a href="https://github.com/zcaudate/hara/blob/master/src/hara/zip.clj#L161-L193" target="_blank">v&nbsp;2.4</a></h6><div><input class="source-toggle" id="entry__pre_hara_zip__next" type="checkbox" /><label class="source-toggle" for="entry__pre_hara_zip__next"></label><pre class="source"><code class="clojure">(defn next
  [zip]
  (cond (nil? zip) nil

        (base/move-down? zip)
        (base/move-down zip)

        :else
        (let [zip (base/move-right zip)]
          (if (base/move-right? zip)
            zip
            
            (loop [zip (-> zip
                           (base/move-up)
                           (base/move-right))]
              (cond (base/top-most? zip)
                    nil
                    
                    (base/move-right? zip)
                    zip
                    
                    :else
                    (recur (-> zip
                               (base/move-up)
                               (base/move-right)))))))))</code></pre></div></div><pre><h6><i><a href="https://github.com/zcaudate/hara/blob/master/test/hara/zip_test.clj#L96-L102" target="_blank">link</a></i></h6><code class="clojure">(->> (from-cursor '[| 1 [2 [6 7] 3] [4 5]])
     (iterate next)
     (take-while identity)
     (map node))
=> '(1 [2 [6 7] 3] 2 [6 7] 6 7 3 [4 5] 4 5)</code></pre></div><div class="entry"><span id="entry__hara_zip__prev"></span><div class="entry-description"><h4><b>prev&nbsp<a data-scroll="" href="#entry__hara_zip__">^</a></b></h4><p><i>move cursor in reverse through the tree in depth first order</i></p></div><div class="entry-option"><h6><a href="https://github.com/zcaudate/hara/blob/master/src/hara/zip.clj#L195-L220" target="_blank">v&nbsp;2.4</a></h6><div><input class="source-toggle" id="entry__pre_hara_zip__prev" type="checkbox" /><label class="source-toggle" for="entry__pre_hara_zip__prev"></label><pre class="source"><code class="clojure">(defn prev
  [zip]
  (cond (nil? zip) nil
        
        (base/move-left? zip)
        (loop [zip (base/move-left zip)]
          (if (base/move-down? zip)
            (recur (-> zip
                       base/move-down
                       base/move-right-most
                       base/move-left))
            zip))

        (base/top-most? zip)
        nil

        :else
        (base/move-up zip)))</code></pre></div></div><pre><h6><i><a href="https://github.com/zcaudate/hara/blob/master/test/hara/zip_test.clj#L105-L111" target="_blank">link</a></i></h6><code class="clojure">(->> (from-cursor '[1 [2 [6 7] 3] [4 | 5]])
     (iterate prev)
     (take 10)
     (map node))
=> '(5 4 [4 5] 3 7 6 [6 7] 2 [2 [6 7] 3] 1)</code></pre></div><div class="entry"><span id="entry__hara_zip__find_next"></span><div class="entry-description"><h4><b>find-next&nbsp<a data-scroll="" href="#entry__hara_zip__">^</a></b></h4><p><i>move cursor through the tree in depth first order to the first matching element</i></p></div><div class="entry-option"><h6><a href="https://github.com/zcaudate/hara/blob/master/src/hara/zip.clj#L222-L236" target="_blank">v&nbsp;2.4</a></h6><div><input class="source-toggle" id="entry__pre_hara_zip__find_next" type="checkbox" /><label class="source-toggle" for="entry__pre_hara_zip__find_next"></label><pre class="source"><code class="clojure">(defn find-next
  [zip pred]
  (->> (iterate next zip)
       (drop 1)
       (take-while identity)
       (filter #(try (pred (node %))
                     (catch Throwable t)))
       (first)))</code></pre></div></div><pre><h6><i><a href="https://github.com/zcaudate/hara/blob/master/test/hara/zip_test.clj#L114-L119" target="_blank">link</a></i></h6><code class="clojure">(-> (vector-zip [1 [2 [6 7] 3] [4 5]])
    (find-next #(= 7 %))
    (cursor))
=> '([1 [2 [6 | 7] 3] [4 5]])</code></pre></div><div class="entry"><span id="entry__hara_zip__find_prev"></span><div class="entry-description"><h4><b>find-prev&nbsp<a data-scroll="" href="#entry__hara_zip__">^</a></b></h4><p><i>move cursor through the tree in reverse order to the last matching element</i></p></div><div class="entry-option"><h6><a href="https://github.com/zcaudate/hara/blob/master/src/hara/zip.clj#L238-L252" target="_blank">v&nbsp;2.4</a></h6><div><input class="source-toggle" id="entry__pre_hara_zip__find_prev" type="checkbox" /><label class="source-toggle" for="entry__pre_hara_zip__find_prev"></label><pre class="source"><code class="clojure">(defn find-prev
  [zip pred]
  (->> (iterate prev zip)
       (drop 1)
       (take-while identity)
       (filter #(try (pred (node %))
                     (catch Throwable t)))
       (first)))</code></pre></div></div><pre><h6><i><a href="https://github.com/zcaudate/hara/blob/master/test/hara/zip_test.clj#L122-L127" target="_blank">link</a></i></h6><code class="clojure">(-> (from-cursor '[1 [2 [6 | 7] 3] [4 5]])
    (find-prev even?)
    (cursor))
=> '([1 [2 [| 6 7] 3] [4 5]])</code></pre></div></div></div></div><div><span id="direction"></span><h3>3.2 &nbsp;&nbsp; Direction</h3></div><div class="api"><span id="entry__hara_zip__"></span><hr /><div><ul><li><a data-scroll="" href="#entry__hara_zip__move_up">move-up</a></li><li><a data-scroll="" href="#entry__hara_zip__move_down">move-down</a></li><li><a data-scroll="" href="#entry__hara_zip__move_left">move-left</a></li><li><a data-scroll="" href="#entry__hara_zip__move_right">move-right</a></li><li><a data-scroll="" href="#entry__hara_zip__move_top_most">move-top-most</a></li><li><a data-scroll="" href="#entry__hara_zip__move_bottom_most">move-bottom-most</a></li><li><a data-scroll="" href="#entry__hara_zip__move_left_most">move-left-most</a></li><li><a data-scroll="" href="#entry__hara_zip__move_right_most">move-right-most</a></li><li><a data-scroll="" href="#entry__hara_zip__move_up_QMARK_">move-up?</a></li><li><a data-scroll="" href="#entry__hara_zip__move_down_QMARK_">move-down?</a></li><li><a data-scroll="" href="#entry__hara_zip__move_left_QMARK_">move-left?</a></li><li><a data-scroll="" href="#entry__hara_zip__move_right_QMARK_">move-right?</a></li><li><a data-scroll="" href="#entry__hara_zip__top_most_QMARK_">top-most?</a></li><li><a data-scroll="" href="#entry__hara_zip__bottom_most_QMARK_">bottom-most?</a></li><li><a data-scroll="" href="#entry__hara_zip__left_most_QMARK_">left-most?</a></li><li><a data-scroll="" href="#entry__hara_zip__right_most_QMARK_">right-most?</a></li></ul><hr style="margin-bottom: 0" /><div><div class="entry"><span id="entry__hara_zip__move_up"></span><div class="entry-description"><h4><b>move-up&nbsp<a data-scroll="" href="#entry__hara_zip__">^</a></b></h4><p><i>move up from current position</i></p></div><div class="entry-option"><h6><a href="https://github.com/zcaudate/hara/blob/master/src/hara/zip/base.clj#L334-L366" target="_blank">v&nbsp;2.4</a></h6><div><input class="source-toggle" id="entry__pre_hara_zip__move_up" type="checkbox" /><label class="source-toggle" for="entry__pre_hara_zip__move_up"></label><pre class="source"><code class="clojure">(defn move-up
  ([zip]
   (cond (top-most? zip)
         (event/raise {:fn  :move-up
                       :op  :move
                       :tag :at-top
                       :zip zip}
                      "At Top Node"
                      (option :zip [] zip)
                      (default :zip))

         (not (:changed? zip))
         (->  (:parent zip)
              (assoc :meta (:meta zip))
              (add-history [:up]))
         
         :else
         (let [{:keys [left right parent levels]} zip
               children ((-> zip :meta :make-node)
                         (concat (reverse left) right))]
           (-> parent
               (assoc :changed? true :meta (:meta zip))
               (update-in [:right] #(->> % rest (cons children)))
               (add-history [:up])))))
  ([zip num]
   (nth (iterate move-up zip) num)))</code></pre></div></div><pre><h6><i><a href="https://github.com/zcaudate/hara/blob/master/test/hara/zip/base_test.clj#L205-L210" target="_blank">link</a></i></h6><code class="clojure">(-> (zip/from-cursor '[1 2 [| 3 4]])
    (move-up)
    (zip/cursor))
=> '([1 2 | [3 4]])</code></pre></div><div class="entry"><span id="entry__hara_zip__move_down"></span><div class="entry-description"><h4><b>move-down&nbsp<a data-scroll="" href="#entry__hara_zip__">^</a></b></h4><p><i>move down from current position</i></p></div><div class="entry-option"><h6><a href="https://github.com/zcaudate/hara/blob/master/src/hara/zip/base.clj#L382-L419" target="_blank">v&nbsp;2.4</a></h6><div><input class="source-toggle" id="entry__pre_hara_zip__move_down" type="checkbox" /><label class="source-toggle" for="entry__pre_hara_zip__move_down"></label><pre class="source"><code class="clojure">(defn move-down
  ([zip]
   (cond (right-most? zip)
         (event/raise {:fn  :move-down
                       :op  :move
                       :tag :no-right
                       :zip zip}
                      "No Right Node"
                      (option :zip [] zip)
                      (default :zip))

         :else
         (let [rnode   (right-node zip)
               branch?  (-> zip :meta :branch?)]
           (cond (branch? rnode)
                 (let [children (-> zip :meta :children)
                       coll (children rnode)]
                   (-> zip
                       (assoc :left () :right coll :parent zip)
                       (add-history [:down])))
                 
                 :else
                 (event/raise {:fn  :move-down
                               :op  :move
                               :tag :not-branch
                               :zip zip}
                              "Not Branch Node"
                              (option :zip [] zip)
                              (default :zip))))))
  ([zip num]
   (nth (iterate move-down zip) num)))</code></pre></div></div><pre><h6><i><a href="https://github.com/zcaudate/hara/blob/master/test/hara/zip/base_test.clj#L221-L226" target="_blank">link</a></i></h6><code class="clojure">(-> (zip/from-cursor '[1 2 | [3 4]])
    (move-down)
    (zip/cursor))
=> '([1 2 [| 3 4]])</code></pre></div><div class="entry"><span id="entry__hara_zip__move_left"></span><div class="entry-description"><h4><b>move-left&nbsp<a data-scroll="" href="#entry__hara_zip__">^</a></b></h4><p><i>move left from current position</i></p></div><div class="entry-option"><h6><a href="https://github.com/zcaudate/hara/blob/master/src/hara/zip/base.clj#L254-L278" target="_blank">v&nbsp;2.4</a></h6><div><input class="source-toggle" id="entry__pre_hara_zip__move_left" type="checkbox" /><label class="source-toggle" for="entry__pre_hara_zip__move_left"></label><pre class="source"><code class="clojure">(defn move-left
  ([{:keys [left right] :as zip}]
   (cond (empty? left)
         (event/raise {:fn  :move-left
                       :op  :move
                       :tag :no-left
                       :zip zip}
                      "No Left Node"
                      (option :zip [] zip)
                      (default :zip))

         :else
         (-> zip
             (assoc :left (rest left))
             (assoc :right (cons (first left) right))
             (add-history [:left]))))
  ([zip num]
   (nth (iterate move-left zip) num)))</code></pre></div></div><pre><h6><i><a href="https://github.com/zcaudate/hara/blob/master/test/hara/zip/base_test.clj#L173-L178" target="_blank">link</a></i></h6><code class="clojure">(-> (zip/from-cursor '[1 2 [3 4 |]])
    (move-left)
    (zip/cursor))
=> '([1 2 [3 | 4]])</code></pre></div><div class="entry"><span id="entry__hara_zip__move_right"></span><div class="entry-description"><h4><b>move-right&nbsp<a data-scroll="" href="#entry__hara_zip__">^</a></b></h4><p><i>move right from current position</i></p></div><div class="entry-option"><h6><a href="https://github.com/zcaudate/hara/blob/master/src/hara/zip/base.clj#L294-L318" target="_blank">v&nbsp;2.4</a></h6><div><input class="source-toggle" id="entry__pre_hara_zip__move_right" type="checkbox" /><label class="source-toggle" for="entry__pre_hara_zip__move_right"></label><pre class="source"><code class="clojure">(defn move-right
  ([{:keys [left right] :as zip}]
   (cond (empty? right)
         (event/raise {:fn  :move-right
                       :op  :move
                       :tag :no-right
                       :zip zip}
                      "No Right Node"
                      (option :zip [] zip)
                      (default :zip))

         :else
         (-> zip
             (assoc :left (cons (first right) left))
             (assoc :right (rest right))
             (add-history [:right]))))
  ([zip num]
   (nth (iterate move-right zip) num)))</code></pre></div></div><pre><h6><i><a href="https://github.com/zcaudate/hara/blob/master/test/hara/zip/base_test.clj#L189-L194" target="_blank">link</a></i></h6><code class="clojure">(-> (zip/from-cursor '[1 2 [| 3 4]])
    (move-right)
    (zip/cursor))
=> '([1 2 [3 | 4]])</code></pre></div><div class="entry"><span id="entry__hara_zip__move_top_most"></span><div class="entry-description"><h4><b>move-top-most&nbsp<a data-scroll="" href="#entry__hara_zip__">^</a></b></h4><p><i>move to top-most point of the tree</i></p></div><div class="entry-option"><h6><a href="https://github.com/zcaudate/hara/blob/master/src/hara/zip/base.clj#L368-L380" target="_blank">v&nbsp;2.4</a></h6><div><input class="source-toggle" id="entry__pre_hara_zip__move_top_most" type="checkbox" /><label class="source-toggle" for="entry__pre_hara_zip__move_top_most"></label><pre class="source"><code class="clojure">(defn move-top-most
  [zip]
  (if (top-most? zip)
    zip
    
    (recur (move-up zip))))</code></pre></div></div><pre><h6><i><a href="https://github.com/zcaudate/hara/blob/master/test/hara/zip/base_test.clj#L213-L218" target="_blank">link</a></i></h6><code class="clojure">(-> (zip/from-cursor '[1 2 [| 3 4]])
    (move-top-most)
    (zip/cursor))
=> '(| [1 2 [3 4]])</code></pre></div><div class="entry"><span id="entry__hara_zip__move_bottom_most"></span><div class="entry-description"><h4><b>move-bottom-most&nbsp<a data-scroll="" href="#entry__hara_zip__">^</a></b></h4><p><i>move to bottom-most point of current branch</i></p></div><div class="entry-option"><h6><a href="https://github.com/zcaudate/hara/blob/master/src/hara/zip/base.clj#L421-L433" target="_blank">v&nbsp;2.4</a></h6><div><input class="source-toggle" id="entry__pre_hara_zip__move_bottom_most" type="checkbox" /><label class="source-toggle" for="entry__pre_hara_zip__move_bottom_most"></label><pre class="source"><code class="clojure">(defn move-bottom-most
  [zip]
  (if (bottom-most? zip)
    zip
    
    (recur (move-down zip))))</code></pre></div></div><pre><h6><i><a href="https://github.com/zcaudate/hara/blob/master/test/hara/zip/base_test.clj#L229-L234" target="_blank">link</a></i></h6><code class="clojure">(-> (zip/from-cursor '[1 2 | [[3] 4]])
    (move-bottom-most)
    (zip/cursor))
=> '([1 2 [[| 3] 4]])</code></pre></div><div class="entry"><span id="entry__hara_zip__move_left_most"></span><div class="entry-description"><h4><b>move-left-most&nbsp<a data-scroll="" href="#entry__hara_zip__">^</a></b></h4><p><i>move to left-most point of current branch</i></p></div><div class="entry-option"><h6><a href="https://github.com/zcaudate/hara/blob/master/src/hara/zip/base.clj#L280-L292" target="_blank">v&nbsp;2.4</a></h6><div><input class="source-toggle" id="entry__pre_hara_zip__move_left_most" type="checkbox" /><label class="source-toggle" for="entry__pre_hara_zip__move_left_most"></label><pre class="source"><code class="clojure">(defn move-left-most
  [zip]
  (cond (move-left? zip)
        (recur (move-left zip))

        :else zip))</code></pre></div></div><pre><h6><i><a href="https://github.com/zcaudate/hara/blob/master/test/hara/zip/base_test.clj#L181-L186" target="_blank">link</a></i></h6><code class="clojure">(-> (zip/from-cursor '[1 2 [3 4 |]])
    (move-left-most)
    (zip/cursor))
=> '([1 2 [| 3 4]])</code></pre></div><div class="entry"><span id="entry__hara_zip__move_right_most"></span><div class="entry-description"><h4><b>move-right-most&nbsp<a data-scroll="" href="#entry__hara_zip__">^</a></b></h4><p><i>move to right-most point of current branch</i></p></div><div class="entry-option"><h6><a href="https://github.com/zcaudate/hara/blob/master/src/hara/zip/base.clj#L320-L332" target="_blank">v&nbsp;2.4</a></h6><div><input class="source-toggle" id="entry__pre_hara_zip__move_right_most" type="checkbox" /><label class="source-toggle" for="entry__pre_hara_zip__move_right_most"></label><pre class="source"><code class="clojure">(defn move-right-most
  [zip]
  (cond (move-right? zip)
        (recur (move-right zip))

        :else zip))</code></pre></div></div><pre><h6><i><a href="https://github.com/zcaudate/hara/blob/master/test/hara/zip/base_test.clj#L197-L202" target="_blank">link</a></i></h6><code class="clojure">(-> (zip/from-cursor '[1 2 [| 3 4]])
    (move-right-most)
    (zip/cursor))
=> '([1 2 [3 4 |]])</code></pre></div><div class="entry"><span id="entry__hara_zip__move_up_QMARK_"></span><div class="entry-description"><h4><b>move-up?&nbsp<a data-scroll="" href="#entry__hara_zip__">^</a></b></h4><p><i>check if can move up from current position</i></p></div><div class="entry-option"><h6><a href="https://github.com/zcaudate/hara/blob/master/src/hara/zip/base.clj#L227-L235" target="_blank">v&nbsp;2.4</a></h6><div><input class="source-toggle" id="entry__pre_hara_zip__move_up_QMARK_" type="checkbox" /><label class="source-toggle" for="entry__pre_hara_zip__move_up_QMARK_"></label><pre class="source"><code class="clojure">(defn move-up?
  [zip]
  (not= :top (:parent zip)))</code></pre></div></div><pre><h6><i><a href="https://github.com/zcaudate/hara/blob/master/test/hara/zip/base_test.clj#L155-L159" target="_blank">link</a></i></h6><code class="clojure">(-> (zip/from-cursor '[1 2 [3 4 |]])
    (move-up?))
=> true</code></pre></div><div class="entry"><span id="entry__hara_zip__move_down_QMARK_"></span><div class="entry-description"><h4><b>move-down?&nbsp<a data-scroll="" href="#entry__hara_zip__">^</a></b></h4><p><i>check if can move down from current position</i></p></div><div class="entry-option"><h6><a href="https://github.com/zcaudate/hara/blob/master/src/hara/zip/base.clj#L237-L251" target="_blank">v&nbsp;2.4</a></h6><div><input class="source-toggle" id="entry__pre_hara_zip__move_down_QMARK_" type="checkbox" /><label class="source-toggle" for="entry__pre_hara_zip__move_down_QMARK_"></label><pre class="source"><code class="clojure">(defn move-down?
  [zip]
  (and (move-right? zip)
       ((-> zip :meta :branch?)
        (first (:right zip)))))</code></pre></div></div><pre><h6><i><a href="https://github.com/zcaudate/hara/blob/master/test/hara/zip/base_test.clj#L162-L170" target="_blank">link</a></i></h6><code class="clojure">(-> (zip/from-cursor '[1 2 [3 4 |]])
    (move-down?))
=> false

(-> (zip/from-cursor '[1 2 | [3 4]])
    (move-down?))
=> true</code></pre></div><div class="entry"><span id="entry__hara_zip__move_left_QMARK_"></span><div class="entry-description"><h4><b>move-left?&nbsp<a data-scroll="" href="#entry__hara_zip__">^</a></b></h4><p><i>check if can move left from current position</i></p></div><div class="entry-option"><h6><a href="https://github.com/zcaudate/hara/blob/master/src/hara/zip/base.clj#L171-L183" target="_blank">v&nbsp;2.4</a></h6><div><input class="source-toggle" id="entry__pre_hara_zip__move_left_QMARK_" type="checkbox" /><label class="source-toggle" for="entry__pre_hara_zip__move_left_QMARK_"></label><pre class="source"><code class="clojure">(defn move-left?
  [zip]
  (not (empty? (:left zip))))</code></pre></div></div><pre><h6><i><a href="https://github.com/zcaudate/hara/blob/master/test/hara/zip/base_test.clj#L113-L121" target="_blank">link</a></i></h6><code class="clojure">(-> (zip/from-cursor '[1 2 [3 | 4]])
    (move-left?))
=> true
  
(-> (zip/from-cursor '[1 2 [| 3 4]])
    (move-left?))
=> false</code></pre></div><div class="entry"><span id="entry__hara_zip__move_right_QMARK_"></span><div class="entry-description"><h4><b>move-right?&nbsp<a data-scroll="" href="#entry__hara_zip__">^</a></b></h4><p><i>check if can move right from current position</i></p></div><div class="entry-option"><h6><a href="https://github.com/zcaudate/hara/blob/master/src/hara/zip/base.clj#L185-L197" target="_blank">v&nbsp;2.4</a></h6><div><input class="source-toggle" id="entry__pre_hara_zip__move_right_QMARK_" type="checkbox" /><label class="source-toggle" for="entry__pre_hara_zip__move_right_QMARK_"></label><pre class="source"><code class="clojure">(defn move-right?
  [zip]
  (not (empty? (:right zip))))</code></pre></div></div><pre><h6><i><a href="https://github.com/zcaudate/hara/blob/master/test/hara/zip/base_test.clj#L124-L132" target="_blank">link</a></i></h6><code class="clojure">(-> (zip/from-cursor '[1 2 [3 | 4]])
    (move-right?))
=> true
  
(-> (zip/from-cursor '[1 2 [3 4 |]])
    (move-right?))
=> false</code></pre></div><div class="entry"><span id="entry__hara_zip__top_most_QMARK_"></span><div class="entry-description"><h4><b>top-most?&nbsp<a data-scroll="" href="#entry__hara_zip__">^</a></b></h4><p><i>check if at top-most point of the tree</i></p></div><div class="entry-option"><h6><a href="https://github.com/zcaudate/hara/blob/master/src/hara/zip/base.clj#L199-L213" target="_blank">v&nbsp;2.4</a></h6><div><input class="source-toggle" id="entry__pre_hara_zip__top_most_QMARK_" type="checkbox" /><label class="source-toggle" for="entry__pre_hara_zip__top_most_QMARK_"></label><pre class="source"><code class="clojure">(defn top-most?
  [zip]
  (= :top (:parent zip)))</code></pre></div></div><pre><h6><i><a href="https://github.com/zcaudate/hara/blob/master/test/hara/zip/base_test.clj#L135-L145" target="_blank">link</a></i></h6><code class="clojure">(-> (zip/from-cursor [1 2 [3 4 '|]])
    (top-most?))
=> false

(-> (zip/from-cursor '[1 2 [3 4 |]])
    (move-up)
    (move-up)
    (top-most?))
=> true</code></pre></div><div class="entry"><span id="entry__hara_zip__bottom_most_QMARK_"></span><div class="entry-description"><h4><b>bottom-most?&nbsp<a data-scroll="" href="#entry__hara_zip__">^</a></b></h4><p><i>check if at bottom-most point of a branch</i></p></div><div class="entry-option"><h6><a href="https://github.com/zcaudate/hara/blob/master/src/hara/zip/base.clj#L215-L225" target="_blank">v&nbsp;2.4</a></h6><div><input class="source-toggle" id="entry__pre_hara_zip__bottom_most_QMARK_" type="checkbox" /><label class="source-toggle" for="entry__pre_hara_zip__bottom_most_QMARK_"></label><pre class="source"><code class="clojure">(defn bottom-most?
  [zip]
  (or (empty? (:right zip))
      (not ((-> zip :meta :branch?)
            (first (:right zip))))))</code></pre></div></div><pre><h6><i><a href="https://github.com/zcaudate/hara/blob/master/test/hara/zip/base_test.clj#L148-L152" target="_blank">link</a></i></h6><code class="clojure">(-> (zip/from-cursor '[1 2 [3 4 |]])
    (bottom-most?))
=> true</code></pre></div><div class="entry"><span id="entry__hara_zip__left_most_QMARK_"></span><div class="entry-description"><h4><b>left-most?&nbsp<a data-scroll="" href="#entry__hara_zip__">^</a></b></h4><p><i>check if at left-most point of a branch</i></p></div><div class="entry-option"><h6><a href="https://github.com/zcaudate/hara/blob/master/src/hara/zip/base.clj#L151-L159" target="_blank">v&nbsp;2.4</a></h6><div><input class="source-toggle" id="entry__pre_hara_zip__left_most_QMARK_" type="checkbox" /><label class="source-toggle" for="entry__pre_hara_zip__left_most_QMARK_"></label><pre class="source"><code class="clojure">(defn left-most?
  [zip]
  (empty? (:left zip)))</code></pre></div></div><pre><h6><i><a href="https://github.com/zcaudate/hara/blob/master/test/hara/zip/base_test.clj#L99-L103" target="_blank">link</a></i></h6><code class="clojure">(-> (zip/from-cursor [1 2 ['| 3 4]])
    (left-most?))
=> true</code></pre></div><div class="entry"><span id="entry__hara_zip__right_most_QMARK_"></span><div class="entry-description"><h4><b>right-most?&nbsp<a data-scroll="" href="#entry__hara_zip__">^</a></b></h4><p><i>check if at right-most point of a branch</i></p></div><div class="entry-option"><h6><a href="https://github.com/zcaudate/hara/blob/master/src/hara/zip/base.clj#L161-L169" target="_blank">v&nbsp;2.4</a></h6><div><input class="source-toggle" id="entry__pre_hara_zip__right_most_QMARK_" type="checkbox" /><label class="source-toggle" for="entry__pre_hara_zip__right_most_QMARK_"></label><pre class="source"><code class="clojure">(defn right-most?
  [zip]
  (empty? (:right zip)))</code></pre></div></div><pre><h6><i><a href="https://github.com/zcaudate/hara/blob/master/test/hara/zip/base_test.clj#L106-L110" target="_blank">link</a></i></h6><code class="clojure">(-> (zip/from-cursor '[1 2 [3 4 |]])
    (right-most?))
=> true</code></pre></div></div></div></div><div><span id="elements"></span><h3>3.3 &nbsp;&nbsp; Elements</h3></div><div class="api"><span id="entry__hara_zip__"></span><hr /><div><ul><li><a data-scroll="" href="#entry__hara_zip__node">node</a></li><li><a data-scroll="" href="#entry__hara_zip__siblings">siblings</a></li><li><a data-scroll="" href="#entry__hara_zip__left_node">left-node</a></li><li><a data-scroll="" href="#entry__hara_zip__right_node">right-node</a></li><li><a data-scroll="" href="#entry__hara_zip__left_nodes">left-nodes</a></li><li><a data-scroll="" href="#entry__hara_zip__right_nodes">right-nodes</a></li><li><a data-scroll="" href="#entry__hara_zip__root_node">root-node</a></li></ul><hr style="margin-bottom: 0" /><div><div class="entry"><span id="entry__hara_zip__node"></span><div class="entry-description"><h4><b>node&nbsp<a data-scroll="" href="#entry__hara_zip__">^</a></b></h4><p><i>accesses the node directly right of the cursor</i></p></div><div class="entry-option"><h6><a href="https://github.com/zcaudate/hara/blob/master/src/hara/zip.clj#L18-L26" target="_blank">v&nbsp;2.4</a></h6><div><input class="source-toggle" id="entry__pre_hara_zip__node" type="checkbox" /><label class="source-toggle" for="entry__pre_hara_zip__node"></label><pre class="source"><code class="clojure">(defn node
  [zip]
  (base/right-node zip))</code></pre></div></div><pre><h6><i><a href="https://github.com/zcaudate/hara/blob/master/test/hara/zip_test.clj#L7-L11" target="_blank">link</a></i></h6><code class="clojure">(-> (from-cursor [1 '| 2 3])
    (node))
=> 2</code></pre></div><div class="entry"><span id="entry__hara_zip__siblings"></span><div class="entry-description"><h4><b>siblings&nbsp<a data-scroll="" href="#entry__hara_zip__">^</a></b></h4><p><i>all elements left and right of current position</i></p></div><div class="entry-option"><h6><a href="https://github.com/zcaudate/hara/blob/master/src/hara/zip/base.clj#L137-L149" target="_blank">v&nbsp;2.4</a></h6><div><input class="source-toggle" id="entry__pre_hara_zip__siblings" type="checkbox" /><label class="source-toggle" for="entry__pre_hara_zip__siblings"></label><pre class="source"><code class="clojure">(defn siblings
  [{:keys [left right] :as zip}]
  (concat (reverse left) right))</code></pre></div></div><pre><h6><i><a href="https://github.com/zcaudate/hara/blob/master/test/hara/zip/base_test.clj#L88-L96" target="_blank">link</a></i></h6><code class="clojure">(-> (zip/from-cursor '[1 2 | 3 4])
    (siblings))
=> '(1 2 3 4)
  
(-> (zip/from-cursor '[1 [2 | 3] 4])
    (siblings))
=> '(2 3)</code></pre></div><div class="entry"><span id="entry__hara_zip__left_node"></span><div class="entry-description"><h4><b>left-node&nbsp<a data-scroll="" href="#entry__hara_zip__">^</a></b></h4><p><i>element directly left of current position</i></p></div><div class="entry-option"><h6><a href="https://github.com/zcaudate/hara/blob/master/src/hara/zip/base.clj#L97-L105" target="_blank">v&nbsp;2.4</a></h6><div><input class="source-toggle" id="entry__pre_hara_zip__left_node" type="checkbox" /><label class="source-toggle" for="entry__pre_hara_zip__left_node"></label><pre class="source"><code class="clojure">(defn left-node
  [zip]
  (first (:left zip)))</code></pre></div></div><pre><h6><i><a href="https://github.com/zcaudate/hara/blob/master/test/hara/zip/base_test.clj#L60-L64" target="_blank">link</a></i></h6><code class="clojure">(-> (zip/from-cursor '[1 2 3 | 4])
    (left-node))
=> 3</code></pre></div><div class="entry"><span id="entry__hara_zip__right_node"></span><div class="entry-description"><h4><b>right-node&nbsp<a data-scroll="" href="#entry__hara_zip__">^</a></b></h4><p><i>element directly right of current position</i></p></div><div class="entry-option"><h6><a href="https://github.com/zcaudate/hara/blob/master/src/hara/zip/base.clj#L107-L115" target="_blank">v&nbsp;2.4</a></h6><div><input class="source-toggle" id="entry__pre_hara_zip__right_node" type="checkbox" /><label class="source-toggle" for="entry__pre_hara_zip__right_node"></label><pre class="source"><code class="clojure">(defn right-node
  [zip]
  (first (:right zip)))</code></pre></div></div><pre><h6><i><a href="https://github.com/zcaudate/hara/blob/master/test/hara/zip/base_test.clj#L67-L71" target="_blank">link</a></i></h6><code class="clojure">(-> (zip/from-cursor '[1 2 3 | 4])
    (right-node))
=> 4</code></pre></div><div class="entry"><span id="entry__hara_zip__left_nodes"></span><div class="entry-description"><h4><b>left-nodes&nbsp<a data-scroll="" href="#entry__hara_zip__">^</a></b></h4><p><i>all elements left of current position</i></p></div><div class="entry-option"><h6><a href="https://github.com/zcaudate/hara/blob/master/src/hara/zip/base.clj#L117-L125" target="_blank">v&nbsp;2.4</a></h6><div><input class="source-toggle" id="entry__pre_hara_zip__left_nodes" type="checkbox" /><label class="source-toggle" for="entry__pre_hara_zip__left_nodes"></label><pre class="source"><code class="clojure">(defn left-nodes
  [zip]
  (reverse (:left zip)))</code></pre></div></div><pre><h6><i><a href="https://github.com/zcaudate/hara/blob/master/test/hara/zip/base_test.clj#L74-L78" target="_blank">link</a></i></h6><code class="clojure">(-> (zip/from-cursor '[1 2 | 3 4])
    (left-nodes))
=> '(1 2)</code></pre></div><div class="entry"><span id="entry__hara_zip__right_nodes"></span><div class="entry-description"><h4><b>right-nodes&nbsp<a data-scroll="" href="#entry__hara_zip__">^</a></b></h4><p><i>all elements right of current position</i></p></div><div class="entry-option"><h6><a href="https://github.com/zcaudate/hara/blob/master/src/hara/zip/base.clj#L127-L135" target="_blank">v&nbsp;2.4</a></h6><div><input class="source-toggle" id="entry__pre_hara_zip__right_nodes" type="checkbox" /><label class="source-toggle" for="entry__pre_hara_zip__right_nodes"></label><pre class="source"><code class="clojure">(defn right-nodes
  [zip]
  (:right zip))</code></pre></div></div><pre><h6><i><a href="https://github.com/zcaudate/hara/blob/master/test/hara/zip/base_test.clj#L81-L85" target="_blank">link</a></i></h6><code class="clojure">(-> (zip/from-cursor '[1 2 | 3 4])
    (right-nodes))
=> '(3 4)</code></pre></div><div class="entry"><span id="entry__hara_zip__root_node"></span><div class="entry-description"><h4><b>root-node&nbsp<a data-scroll="" href="#entry__hara_zip__">^</a></b></h4><p><i>accesses the top level node</i></p></div><div class="entry-option"><h6><a href="https://github.com/zcaudate/hara/blob/master/src/hara/zip.clj#L76-L85" target="_blank">v&nbsp;2.4</a></h6><div><input class="source-toggle" id="entry__pre_hara_zip__root_node" type="checkbox" /><label class="source-toggle" for="entry__pre_hara_zip__root_node"></label><pre class="source"><code class="clojure">(defn root-node
  [zip]
  (-> zip base/move-top-most base/right-node))</code></pre></div></div><pre><h6><i><a href="https://github.com/zcaudate/hara/blob/master/test/hara/zip_test.clj#L50-L55" target="_blank">link</a></i></h6><code class="clojure">(-> (vector-zip [[[3] 2] 1])
    (move-bottom-most)
    (root-node))
=> [[[3] 2] 1]</code></pre></div></div></div></div><div><span id="editing"></span><h3>3.4 &nbsp;&nbsp; Editing</h3></div><div class="api"><span id="entry__hara_zip__"></span><hr /><div><ul><li><a data-scroll="" href="#entry__hara_zip__delete_left">delete-left</a></li><li><a data-scroll="" href="#entry__hara_zip__delete_right">delete-right</a></li><li><a data-scroll="" href="#entry__hara_zip__insert_left">insert-left</a></li><li><a data-scroll="" href="#entry__hara_zip__insert_right">insert-right</a></li><li><a data-scroll="" href="#entry__hara_zip__replace_left">replace-left</a></li><li><a data-scroll="" href="#entry__hara_zip__replace_right">replace-right</a></li><li><a data-scroll="" href="#entry__hara_zip__prewalk">prewalk</a></li><li><a data-scroll="" href="#entry__hara_zip__postwalk">postwalk</a></li><li><a data-scroll="" href="#entry__hara_zip__surround">surround</a></li><li><a data-scroll="" href="#entry__hara_zip__traverse">traverse</a></li><li><a data-scroll="" href="#entry__hara_zip__history">history</a></li></ul><hr style="margin-bottom: 0" /><div><div class="entry"><span id="entry__hara_zip__delete_left"></span><div class="entry-description"><h4><b>delete-left&nbsp<a data-scroll="" href="#entry__hara_zip__">^</a></b></h4><p><i>delete element/s left of the current position</i></p></div><div class="entry-option"><h6><a href="https://github.com/zcaudate/hara/blob/master/src/hara/zip/base.clj#L497-L523" target="_blank">v&nbsp;2.4</a></h6><div><input class="source-toggle" id="entry__pre_hara_zip__delete_left" type="checkbox" /><label class="source-toggle" for="entry__pre_hara_zip__delete_left"></label><pre class="source"><code class="clojure">(defn delete-left
  ([{:keys [left] :as zip}]
   (cond (empty? left)
         (event/raise {:fn  :delete-left
                       :op  :delete
                       :tag :no-left
                       :zip zip}
                      "No Left Node")
         
         (top-most? zip)
         (event/raise {:fn  :delete-left
                       :op  :delete
                       :tag :at-top
                       :zip zip}
                      "At Top Node")

         :else
         (delete-base zip :left :delete-left)))
  ([zip num]
   (nth (iterate delete-left zip) num)))</code></pre></div></div><pre><h6><i><a href="https://github.com/zcaudate/hara/blob/master/test/hara/zip/base_test.clj#L259-L264" target="_blank">link</a></i></h6><code class="clojure">(-> (zip/from-cursor '[1 2 | 3])
    (delete-left)
    (zip/cursor))
=> '([1 | 3])</code></pre></div><div class="entry"><span id="entry__hara_zip__delete_right"></span><div class="entry-description"><h4><b>delete-right&nbsp<a data-scroll="" href="#entry__hara_zip__">^</a></b></h4><p><i>delete element/s right of the current position</i></p></div><div class="entry-option"><h6><a href="https://github.com/zcaudate/hara/blob/master/src/hara/zip/base.clj#L525-L551" target="_blank">v&nbsp;2.4</a></h6><div><input class="source-toggle" id="entry__pre_hara_zip__delete_right" type="checkbox" /><label class="source-toggle" for="entry__pre_hara_zip__delete_right"></label><pre class="source"><code class="clojure">(defn delete-right
  ([{:keys [right] :as zip}]
   (cond (empty? right)
         (event/raise {:fn  :delete-right
                       :op  :delete
                       :tag :no-right
                       :zip zip}
                      "No Right Node")

         (top-most? zip)
         (event/raise {:fn  :delete-right
                       :op  :delete
                       :tag :at-top
                       :zip zip}
                      "At Top Node")

         :else
         (delete-base zip :right :delete-left)))
  ([zip num]
   (nth (iterate delete-right zip) num)))</code></pre></div></div><pre><h6><i><a href="https://github.com/zcaudate/hara/blob/master/test/hara/zip/base_test.clj#L267-L272" target="_blank">link</a></i></h6><code class="clojure">(-> (zip/from-cursor '[1 2 | 3])
    (delete-right)
    (zip/cursor))
=> '([1 2 |])</code></pre></div><div class="entry"><span id="entry__hara_zip__insert_left"></span><div class="entry-description"><h4><b>insert-left&nbsp<a data-scroll="" href="#entry__hara_zip__">^</a></b></h4><p><i>insert element/s left of the current position</i></p></div><div class="entry-option"><h6><a href="https://github.com/zcaudate/hara/blob/master/src/hara/zip/base.clj#L444-L464" target="_blank">v&nbsp;2.4</a></h6><div><input class="source-toggle" id="entry__pre_hara_zip__insert_left" type="checkbox" /><label class="source-toggle" for="entry__pre_hara_zip__insert_left"></label><pre class="source"><code class="clojure">(defn insert-left
  ([zip element]
   (cond (top-most? zip)
         (event/raise {:fn  :insert-left
                       :op  :insert
                       :tag :at-top
                       :zip zip
                       :element element}
                      "At Top Node")

         :else
         (insert-base zip element :left :insert-left)))
  ([zip element & more]
   (apply insert-left (insert-left zip element) more)))</code></pre></div></div><pre><h6><i><a href="https://github.com/zcaudate/hara/blob/master/test/hara/zip/base_test.clj#L240-L245" target="_blank">link</a></i></h6><code class="clojure">(-> (zip/from-cursor '[1 2  [[| 3] 4]])
    (insert-left 1 2 3)
    (zip/cursor))
=> '([1 2 [[1 2 3 | 3] 4]])</code></pre></div><div class="entry"><span id="entry__hara_zip__insert_right"></span><div class="entry-description"><h4><b>insert-right&nbsp<a data-scroll="" href="#entry__hara_zip__">^</a></b></h4><p><i>insert element/s right of the current position</i></p></div><div class="entry-option"><h6><a href="https://github.com/zcaudate/hara/blob/master/src/hara/zip/base.clj#L466-L486" target="_blank">v&nbsp;2.4</a></h6><div><input class="source-toggle" id="entry__pre_hara_zip__insert_right" type="checkbox" /><label class="source-toggle" for="entry__pre_hara_zip__insert_right"></label><pre class="source"><code class="clojure">(defn insert-right
  ([zip element]
   (cond (top-most? zip)
         (event/raise {:fn  :insert-right
                       :op  :insert
                       :tag :at-top
                       :zip zip
                       :element element}
                      "At Top Node")

         :else
         (insert-base zip element :right :insert-right)))
  ([zip element & more]
   (apply insert-right (insert-right zip element) more)))</code></pre></div></div><pre><h6><i><a href="https://github.com/zcaudate/hara/blob/master/test/hara/zip/base_test.clj#L248-L253" target="_blank">link</a></i></h6><code class="clojure">(-> (zip/from-cursor '[| 1 2 3])
    (insert-right 1 2 3)
    (zip/cursor))
=> '([| 3 2 1 1 2 3])</code></pre></div><div class="entry"><span id="entry__hara_zip__replace_left"></span><div class="entry-description"><h4><b>replace-left&nbsp<a data-scroll="" href="#entry__hara_zip__">^</a></b></h4><p><i>replace element left of the current position</i></p></div><div class="entry-option"><h6><a href="https://github.com/zcaudate/hara/blob/master/src/hara/zip/base.clj#L553-L573" target="_blank">v&nbsp;2.4</a></h6><div><input class="source-toggle" id="entry__pre_hara_zip__replace_left" type="checkbox" /><label class="source-toggle" for="entry__pre_hara_zip__replace_left"></label><pre class="source"><code class="clojure">(defn replace-left
  [{:keys [left] :as zip} element]
  (cond (empty? left)
        (event/raise {:fn  :replace-left
                      :op  :replace
                      :tag :no-left
                      :zip zip}
                     "No Left Node")

        :else
        (-> zip
            (update-in [:left] #(->> % rest (cons element)))
            (assoc :changed? true)
            (update-in [:meta :history] conj :replace-left))))</code></pre></div></div><pre><h6><i><a href="https://github.com/zcaudate/hara/blob/master/test/hara/zip/base_test.clj#L275-L280" target="_blank">link</a></i></h6><code class="clojure">(-> (zip/from-cursor '[1 2 | 3])
    (replace-left "10")
    (zip/cursor))
=> '([1 "10" | 3])</code></pre></div><div class="entry"><span id="entry__hara_zip__replace_right"></span><div class="entry-description"><h4><b>replace-right&nbsp<a data-scroll="" href="#entry__hara_zip__">^</a></b></h4><p><i>replace element right of the current position</i></p></div><div class="entry-option"><h6><a href="https://github.com/zcaudate/hara/blob/master/src/hara/zip/base.clj#L575-L595" target="_blank">v&nbsp;2.4</a></h6><div><input class="source-toggle" id="entry__pre_hara_zip__replace_right" type="checkbox" /><label class="source-toggle" for="entry__pre_hara_zip__replace_right"></label><pre class="source"><code class="clojure">(defn replace-right
  [{:keys [right] :as zip} element]
  (cond (empty? right)
        (event/raise {:fn  :replace-right
                      :op  :replace
                      :tag :no-right
                      :zip zip}
                     "No Right Node")

        :else
        (-> zip
            (update-in [:right] #(->> % rest (cons element)))
            (assoc :changed? true)
            (update-in [:meta :history] conj :replace-right))))</code></pre></div></div><pre><h6><i><a href="https://github.com/zcaudate/hara/blob/master/test/hara/zip/base_test.clj#L283-L288" target="_blank">link</a></i></h6><code class="clojure">(-> (zip/from-cursor '[1 2 | 3])
    (replace-right "10")
    (zip/cursor))
=> '([1 2 | "10"])</code></pre></div><div class="entry"><span id="entry__hara_zip__prewalk"></span><div class="entry-description"><h4><b>prewalk&nbsp<a data-scroll="" href="#entry__hara_zip__">^</a></b></h4><p><i>emulates clojure.walk/prewalk behavior with zipper</i></p></div><div class="entry-option"><h6><a href="https://github.com/zcaudate/hara/blob/master/src/hara/zip.clj#L265-L287" target="_blank">v&nbsp;2.4</a></h6><div><input class="source-toggle" id="entry__pre_hara_zip__prewalk" type="checkbox" /><label class="source-toggle" for="entry__pre_hara_zip__prewalk"></label><pre class="source"><code class="clojure">(defn prewalk
  [zip f]
  (let [zip (base/replace-right zip (f (base/right-node zip)))]
    (cond (base/move-down? zip)
          (loop [zip (base/move-down zip)]
            (let [zip  (-> (prewalk zip f)
                           (base/move-right))]
              (cond (base/move-right? zip)
                    (recur zip)
                    
                    :else
                    (base/move-up zip))))
          
          :else zip)))</code></pre></div></div><pre><h6><i><a href="https://github.com/zcaudate/hara/blob/master/test/hara/zip_test.clj#L130-L137" target="_blank">link</a></i></h6><code class="clojure">(-> (vector-zip [1 [2 [6 7] 3] [4 5]])
    (prewalk (fn [v] (if (vector? v)
                       (conj v 100)
                       (+ v 100))))
    (root-node))
=> [101 [102 [106 107 200] 103 200] [104 105 200] 200]</code></pre></div><div class="entry"><span id="entry__hara_zip__postwalk"></span><div class="entry-description"><h4><b>postwalk&nbsp<a data-scroll="" href="#entry__hara_zip__">^</a></b></h4><p><i>emulates clojure.walk/postwalk behavior with zipper</i></p></div><div class="entry-option"><h6><a href="https://github.com/zcaudate/hara/blob/master/src/hara/zip.clj#L289-L313" target="_blank">v&nbsp;2.4</a></h6><div><input class="source-toggle" id="entry__pre_hara_zip__postwalk" type="checkbox" /><label class="source-toggle" for="entry__pre_hara_zip__postwalk"></label><pre class="source"><code class="clojure">(defn postwalk
  [zip f]
  (let [zip (cond (base/move-down? zip)
                  (loop [zip (base/move-down zip)]
                    (let [zip  (-> (prewalk zip f)
                                   (base/move-right))]
                      (cond (base/move-right? zip)
                            (recur zip)
                            
                            :else
                            (base/move-up zip))))
                  
                  :else zip)]
    (base/replace-right zip (f (base/right-node zip)))))</code></pre></div></div><pre><h6><i><a href="https://github.com/zcaudate/hara/blob/master/test/hara/zip_test.clj#L140-L149" target="_blank">link</a></i></h6><code class="clojure">(-> (vector-zip [1 [2 [6 7] 3] [4 5]])
    (find-next even?)
    (up)
    (postwalk (fn [v] (if (vector? v)
                        (conj v 100)
                        (+ v 100))))
    (root-node))
=> [1 [102 [106 107 200] 103 100] [4 5]]</code></pre></div><div class="entry"><span id="entry__hara_zip__surround"></span><div class="entry-description"><h4><b>surround&nbsp<a data-scroll="" href="#entry__hara_zip__">^</a></b></h4><p><i>adds additional levels to the element</i></p></div><div class="entry-option"><h6><a href="https://github.com/zcaudate/hara/blob/master/src/hara/zip.clj#L87-L111" target="_blank">v&nbsp;2.4</a></h6><div><input class="source-toggle" id="entry__pre_hara_zip__surround" type="checkbox" /><label class="source-toggle" for="entry__pre_hara_zip__surround"></label><pre class="source"><code class="clojure">(defn surround
  ([zip]
   (cond (base/right-most? zip)
         (event/raise {:fn  :surround
                       :op  :insert
                       :tag :no-right
                       :zip zip}
                      "No Right Node")

         :else
         (let [rnode (base/right-node zip)
               make-node (-> zip :meta :make-node)
               new-node (make-node [rnode])]
           (-> zip
               (base/replace-right new-node)
               (base/move-down)))))
  ([zip num]
   (nth (iterate surround zip) num)))</code></pre></div></div><pre><h6><i><a href="https://github.com/zcaudate/hara/blob/master/test/hara/zip_test.clj#L58-L63" target="_blank">link</a></i></h6><code class="clojure">(-> (vector-zip 1)
    (surround 2)
    (root-node))
=> [[1]]</code></pre></div><div class="entry"><span id="entry__hara_zip__traverse"></span><div class="entry-description"><h4><b>traverse&nbsp<a data-scroll="" href="#entry__hara_zip__">^</a></b></h4><p><i>traverse through zipper with data</i></p></div><div class="entry-option"><h6><a href="https://github.com/zcaudate/hara/blob/master/src/hara/zip.clj#L351-L378" target="_blank">v&nbsp;2.4</a></h6><div><input class="source-toggle" id="entry__pre_hara_zip__traverse" type="checkbox" /><label class="source-toggle" for="entry__pre_hara_zip__traverse"></label><pre class="source"><code class="clojure">(defn traverse
  ([zip command]
   (let [[op args] (cond (keyword? command)
                         [command ()]

                         (vector? command)
                         [(first command) (rest command)]

                         :else (throw (Exception. (str "Invalid input: " command))))
         op-fn (op-lookup op)]
     (if (nil? op-fn)
       (throw (Exception. (str "Cannot find operation: " op
                               "values are: n"
                               (sort (keys op-lookup)))))
       (apply op-fn zip args))))
  ([zip command & more]
   (apply traverse (traverse zip command) more)))</code></pre></div></div><pre><h6><i><a href="https://github.com/zcaudate/hara/blob/master/test/hara/zip_test.clj#L152-L161" target="_blank">link</a></i></h6><code class="clojure">(-> (traverse (vector-zip [1 [[2] 3]])
              :down
              :right
              [:down 2]
              [:right]
              [:insert-right 1 2 3 4])
    (cursor))
=> '([1 [[2 | 4 3 2 1] 3]])</code></pre></div><div class="entry"><span id="entry__hara_zip__history"></span><div class="entry-description"><h4><b>history&nbsp<a data-scroll="" href="#entry__hara_zip__">^</a></b></h4><p><i>accesses the zipper history</i></p></div><div class="entry-option"><h6><a href="https://github.com/zcaudate/hara/blob/master/src/hara/zip/base.clj#L77-L87" target="_blank">v&nbsp;2.4</a></h6><div><input class="source-toggle" id="entry__pre_hara_zip__history" type="checkbox" /><label class="source-toggle" for="entry__pre_hara_zip__history"></label><pre class="source"><code class="clojure">(defn history
  [zip]
  (-> zip :meta :history))</code></pre></div></div><pre><h6><i><a href="https://github.com/zcaudate/hara/blob/master/test/hara/zip/base_test.clj#L48-L54" target="_blank">link</a></i></h6><code class="clojure">(-> (vector-zip [1 [2 3]])
    (move-down)
    (move-right)
    (history))
=> [[:down] [:right]]</code></pre></div></div></div></div><div><span id="boundaries"></span><h2><b>4 &nbsp;&nbsp; Boundaries</b></h2></div><div><span id="default-behavior"></span><h3>4.1 &nbsp;&nbsp; Default Behavior</h3></div><div><p>How zippers respond when crossing boundaries can be set. In general, movement will not throw an exception:</p></div><div class="code"><pre><code class="clojure">(-&gt; (zip/from-cursor '[1 2 |])
    (zip/move-right)
    (zip/cursor))
=&gt; '([1 2 |])

(-&gt; (zip/from-cursor '[| 1 2])
    (zip/move-left)
    (zip/cursor))
=&gt; '([| 1 2])</code></pre></div><div><p>Whilst deletions and replacements will.</p></div><div class="code"><pre><code class="clojure">(-&gt; (zip/from-cursor '[1 2 |])
    (zip/delete-right))
  
=&gt; (throws-info {:fn :delete-right
                 :op :delete
                 :tag :no-right})

(-&gt; (zip/from-cursor '[| 1 2])
    (zip/replace-left 1))
=&gt; (throws-info {:fn :replace-left,
                 :op :replace,
                 :tag :no-left})</code></pre></div><div><span id="overrides"></span><h3>4.2 &nbsp;&nbsp; Overrides</h3></div><div><p>However, default behavior can be rewritten through the <code>hara.event</code> condition system. In this case a move-left call which previously resulted in the zipper staying where is is is now staring put:</p></div><div class="code"><pre><code class="clojure">(manage
 (-&gt; (zip/from-cursor '[| 1 2])
     (zip/move-left))
 (on {:tag :no-left}
     e
     (fail)))
=&gt; (throws-info {:fn :move-left,
                 :op :move,
                 :tag :no-left})</code></pre></div><div><p>And a <code>delete-right</code> call which previously threw an exception will continue as normal:</p></div><div class="code"><pre><code class="clojure">(manage
 (-&gt; (zip/from-cursor '[1 2 |])
     (zip/delete-right)
     (zip/cursor))
 (on {:tag :no-right}
     [zip]
     (continue zip)))
=&gt; '([1 2 |])</code></pre></div>
        </div>
      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

  </body>

  <script>
  if (true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-31320512-2', 'caudate.me');
    ga('send', 'pageview');
  }
  </script>
  
  <script type="text/javascript">
    smoothScroll.init();
    gumshoe.init({});
  
    hljs.registerLanguage("clojure",function(e){var t={"builtin-name":"def defonce cond apply if-not if-let if not not= = < > <= >= == + / * - rem quot neg? pos? delay? symbol? keyword? true? false? integer? empty? coll? list? set? ifn? fn? associative? sequential? sorted? counted? reversible? number? decimal? class? distinct? isa? float? rational? reduced? ratio? odd? even? char? seq? vector? string? map? nil? contains? zero? instance? not-every? not-any? libspec? -> ->> .. . inc compare do dotimes mapcat take remove take-while drop letfn drop-last take-last drop-while while intern condp case reduced cycle split-at split-with repeat replicate iterate range merge zipmap declare line-seq sort comparator sort-by dorun doall nthnext nthrest partition eval doseq await await-for let agent atom send send-off release-pending-sends add-watch mapv filterv remove-watch agent-error restart-agent set-error-handler error-handler set-error-mode! error-mode shutdown-agents quote var fn loop recur throw try monitor-enter monitor-exit defmacro defn defn- macroexpand macroexpand-1 for dosync and or when when-not when-let comp juxt partial sequence memoize constantly complement identity assert peek pop doto proxy defstruct first rest cons defprotocol cast coll deftype defrecord last butlast sigs reify second ffirst fnext nfirst nnext defmulti defmethod meta with-meta ns in-ns create-ns import refer keys select-keys vals key val rseq name namespace promise into transient persistent! conj! assoc! dissoc! pop! disj! use class type num float double short byte boolean bigint biginteger bigdec print-method print-dup throw-if printf format load compile get-in update-in pr pr-on newline flush read slurp read-line subvec with-open memfn time re-find re-groups rand-int rand mod locking assert-valid-fdecl alias resolve ref deref refset swap! reset! set-validator! compare-and-set! alter-meta! reset-meta! commute get-validator alter ref-set ref-history-count ref-min-history ref-max-history ensure sync io! new next conj set! to-array future future-call into-array aset gen-class reduce map filter find empty hash-map hash-set sorted-map sorted-map-by sorted-set sorted-set-by vec vector seq flatten reverse assoc dissoc list disj get union difference intersection extend extend-type extend-protocol int nth delay count concat chunk chunk-buffer chunk-append chunk-first chunk-rest max min dec unchecked-inc-int unchecked-inc unchecked-dec-inc unchecked-dec unchecked-negate unchecked-add-int unchecked-add unchecked-subtract-int unchecked-subtract chunk-next chunk-cons chunked-seq? prn vary-meta lazy-seq spread list* str find-keyword keyword symbol gensym force rationalize"},r="a-zA-Z_\\-!.?+*=<>&#'",n="["+r+"]["+r+"0-9/;:]*",a="[-+]?\\d+(\\.\\d+)?",o={b:n,r:0},s={cN:"number",b:a,r:0},i=e.inherit(e.QSM,{i:null}),c=e.C(";","$",{r:0}),d={cN:"literal",b:/\b(true|false|nil)\b/},l={b:"[\\[\\{]",e:"[\\]\\}]"},m={cN:"comment",b:"\\^"+n},p=e.C("\\^\\{","\\}"),u={cN:"symbol",b:"[:]{1,2}"+n},f={b:"\\(",e:"\\)"},h={eW:!0,r:0},y={k:t,l:n,cN:"name",b:n,starts:h},b=[f,i,m,p,c,u,l,s,d,o];return f.c=[e.C("comment",""),y,h],h.c=b,l.c=b,{aliases:["clj"],i:/\S/,c:[f,i,m,p,c,u,l,s,d]}});
    hljs.initHighlightingOnLoad();
  </script>
</html>
